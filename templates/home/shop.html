{% extends 'base/base.html' %}

{% block content %}

<body class="archive post-type-archive post-type-archive-product wp-custom-logo wp-embed-responsive theme-avanam woocommerce-shop woocommerce woocommerce-page woocommerce-no-js hfeed footer-on-bottom hide-focus-outline link-style-no-underline has-sidebar has-left-sidebar content-title-style-above content-width-normal content-style-unboxed content-vertical-padding-show non-transparent-header mobile-non-transparent-header base-elementor-colors elementor-default elementor-kit-7">
    
    <div id="wrapper" class="site wp-site-blocks">
        {% include 'base/header.html' %}

        <!-- #masthead -->
        <div id="inner-wrap" class="wrap hfeed bst-clear">
            <div class="side-mobile-toggle-open-container">
                <button id="side-mobile-toggle" class="side-menu-toggle-open drawer-toggle">
                    <span class="menu-toggle-icon">Ochiq</span>
                </button>
            </div>
            <section role="banner" class="entry-hero product-archive-hero-section entry-hero-layout-standard">
                <div class="entry-hero-container-inner">
                    <div class="hero-section-overlay"></div>
                    <div class="hero-container site-container">
                        <header class="entry-header product-archive-title title-align-left title-tablet-align-left title-mobile-align-left">
                            <nav id="base-breadcrumbs" aria-label="Breadcrumbs" class="base-breadcrumbs">
                                <div class="base-breadcrumb-container">
                                    <span>
                                        <a href="/" itemprop="url" class="base-bc-home">
                                            <span>Bosh saxifa</span>
                                        </a>
                                    </span>
                                    <span class="bc-delimiter">/</span>
                                    <span class="base-bread-current">Do'kon</span>
                                </div>
                            </nav>
                            <h1 class="page-title archive-title">Do'kon</h1>
                        </header>
                        <!-- .entry-header -->
                    </div>
                </div>
            </section>
            <!-- .entry-hero -->
            <div id="primary" class="content-area">
                <div class="content-container site-container">
                    <main id="main" class="site-main" role="main">
                        <header class="woocommerce-products-header">
                            <div class="wpc-custom-selected-terms">
                                <ul class="wpc-filter-chips-list wpc-filter-chips-1022-1 wpc-filter-chips-1022 wpc-empty-chips-container" data-set="1022" data-setcount="1022-1"></ul>
                            </div>
                        </header>
                        <div class="woocommerce-notices-wrapper"></div>
                        <div class="base-shop-top-row">
                            <div class="base-shop-top-item base-woo-results-count">
                                <p class="woocommerce-result-count">{{ products.paginator.count }} ta natijadan {{ products.start_index }}-{{ products.end_index }} tasi koʻrsatilmoqda
                                </p>
                            </div>
                            <div class="base-shop-top-item base-woo-ordering">
                                <form class="woocommerce-ordering" method="get">
                                    <select name="orderby" class="orderby" aria-label="Shop order">
                                        <option value="menu_order" selected='selected'>Birlamchi saralash</option>
                                        <option value="popularity">Mashhurlik bo'yicha saralash</option>
                                        <option value="rating">O'rtacha reyting bo'yicha saralash</option>
                                        <option value="date">Eng oxirgisi boʻyicha saralash</option>
                                        <option value="price">Narx bo'yicha saralash: pastdan yuqoriga</option>
                                        <option value="price-desc">Narx bo'yicha saralash: yuqoridan pastgacha</option>
                                    </select>
                                    <input type="hidden" name="paged" value="1"/>
                                </form>
                            </div>
                            <div class="base-shop-top-item base-woo-toggle">
                                <div class="base-product-toggle-container base-product-toggle-outer">
                                    <button title="Grid View" class="base-toggle-shop-layout base-toggle-grid toggle-active" data-archive-toggle="grid">
                                        <span class="base-svg-iconset">
                                            <svg class="base-svg-icon base-grid-svg" fill="currentColor" version="1.1" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                                <title>Grid</title>
                                                <path d="M8 19.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM8 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM18 19.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM8 3.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM18 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM28 19.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM18 3.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM28 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5zM28 3.5v3c0 0.828-0.672 1.5-1.5 1.5h-5c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h5c0.828 0 1.5 0.672 1.5 1.5z"></path>
                                            </svg>
                                        </span>
                                    </button>
                                    <button title="List View" class="base-toggle-shop-layout base-toggle-list" data-archive-toggle="list">
                                        <span class="base-svg-iconset">
                                            <svg class="base-svg-icon base-list-svg" fill="currentColor" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                                                <title>List</title>
                                                <path d="M1 3h14v3h-14zM1 7h14v3h-14zM1 11h14v3h-14z"></path>
                                            </svg>
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <ul class="products content-wrap product-archive grid-cols grid-ss-col-2 grid-sm-col-3 grid-lg-col-4 woo-archive-action-visible woo-archive-btn-button woo-archive-loop  woo-archive-image-hover-fade">
                            {% for product in products %}
                            <li class="entry content-bg loop-entry product type-product post-11284 status-publish first instock product_cat-air-tools product_cat-cordless-kits product_cat-cutting-tools product_cat-nailers product_cat-power-tools product_cat-pressure-washers product_cat-safety-equipment product_cat-safety-workwear product_cat-staple-guns has-post-thumbnail featured shipping-taxable purchasable product-type-variable has-default-attributes">
                                <div class="product-thumbnail">
                                    <div class="archive-image-wrap">
                                        <div class="archive-extra-button-wrap">
                                            <button class="woosw-btn woosw-btn-11284 woosw-btn-has-icon woosw-btn-icon-only">
                                                <i class="fa-regular fa-heart"></i>
                                            </button>
                                            <button class="woosc-btn woosc-btn-11284  woosc-btn-has-icon woosc-btn-icon-only">
                                                <i class="fas fa-exchange-alt"></i>
                                            </button>
                                            <button class="woosq-btn woosq-btn-11284 woosq-btn-has-icon woosq-btn-icon-only">
                                                <i class="fa-duotone fa-solid fa-eye"></i>
                                            </button>
                                        </div>
                                        <a href="{% url 'shop_view' product.id %}" class="woocommerce-loop-image-link woocommerce-LoopProduct-link woocommerce-loop-product__link product-has-hover-image">
                                            {% for image in product.images.all|slice:":2" %}
                                            {% if forloop.counter == 1 %}
                                                <img style="height: 230px;" src="{{ image.get_produc_img  }}" class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail" alt=""/>
                                            {% elif forloop.counter == 2 %}
                                                <img style="height: 230px;" src="{{ image.get_produc_img  }}" class="secondary-product-image attachment-woocommerce_thumbnail attachment-shop-catalog wp-post-image wp-post-image--secondary" alt=""/>
                                            {% endif %}
                                            {% endfor %}
                                        </a>
                                        
                                    </div>
                                    <div class="product-actions"></div>
                                </div>
                                <div class="product-details content-bg entry-content-wrap">
                                    <h2 class="woocommerce-loop-product__title">
                                        <a href="{% url 'shop_view' product.id %}" class="woocommerce-LoopProduct-link-title woocommerce-loop-product__title_ink">{{product.name}}</a>
                                    </h2>
                                    <span class="price">
                                        <span class="woocommerce-Price-amount amount">
                                            <bdi>
                                                {{product.price}}
                                            </bdi>
                                        </span>
                                    </span>
                                    <div class="product-excerpt">
                                        <p>{{product.text}}</p>
                                    </div>
                                    <div class="product-action-wrap style-button">
                                        <a href="{% url 'shop_view' product.id %}"class="button product_type_variable add_to_cart_button">
                                            Tanlash
                                        </a>
                                    </div>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                        <nav class="woocommerce-pagination">
                            <ul class="page-numbers">
                                <!-- Oldingi sahifa tugmasi -->
                                {% if products.has_previous %}
                                    <li><a class="prev page-numbers" href="?page={{ products.previous_page_number }}">&larr;</a></li>
                                {% else %}
                                    <li class="disabled"><span class="prev page-numbers">&larr;</span></li>
                                {% endif %}
                                
                                <!-- Sahifa raqamlari -->
                                {% for page in products.paginator.page_range %}
                                    {% if page == products.number %}
                                        <li><span aria-current="page" class="page-numbers current">{{ page }}</span></li>
                                    {% elif page > products.number|add:'-3' and page < products.number|add:'3' %}
                                        <li><a class="page-numbers" href="?page={{ page }}">{{ page }}</a></li>
                                    {% endif %}
                                {% endfor %}
                                
                                <!-- Keyingi sahifa tugmasi -->
                                {% if products.has_next %}
                                    <li><a class="next page-numbers" href="?page={{ products.next_page_number }}">&rarr;</a></li>
                                {% else %}
                                    <li class="disabled"><span class="next page-numbers">&rarr;</span></li>
                                {% endif %}
                            </ul>
                        </nav>
                    </main>
                    <aside class="primary-sidebar widget-area sidebar-slug-sidebar-primary sidebar-link-style-plain">
                        <div class="sidebar-inner-wrap">                        
                            <section class="widget">
                                <div class="wpc-filters-main-wrap" >
                                    <div class="wpc-filter-header">
                                        <div class="widget-title wpc-filter-title">Turkumlar boʻyicha filtrlash</div>
                                    </div>
                                    <div class="wpc-filter-content">
                                        <ul class="wpc-filters-ul-list ">
                                            <form method="GET" action="{% url 'shop' %}">
                                                {% for product in product_categorys %}
                                                <li class="wpc-checkbox-item wpc-term-item">
                                                    <div class="wpc-term-item-content-wrapper">
                                                        <input type="checkbox" name="category_id" value="{{ product.id }}" {% if product.id in selected_categories %}checked{% endif %} onchange="this.form.submit()">
                                                        <label>
                                                            {{ product.name }}
                                                        </label>
                                                    </div>
                                                </li>
                                                {% endfor %}
                                            </form>
                                        </ul>                  
                                    </div>
                                </div>
                            </section>
                        </div>
                    </aside>
                    <!-- #secondary -->
                </div>
            </div>
        </div>
        <!-- #inner-wrap -->

        {% include 'base/footer.html' %}
    </div>
    {% include 'base/js.html' %}
</body>

{% endblock content %}